package Tools;

import Utils.HandleFiles;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.*;

import java.io.*;
import java.net.URL;
import java.util.ResourceBundle;
import java.util.Scanner;

public class EncoderToolController implements Initializable
{

    @FXML private Button EncodeButton;
    @FXML private Button DecodeButton;
    @FXML private TextArea PlainTextBox;
    @FXML private TextArea EncodeTextBox;
    @FXML private Button LoadPlainTextButton;
    @FXML private Button SavePlainTextButton;
    @FXML private Button LoadEncodeTextButton;
    @FXML private Button SaveEncodeTextButton;
    @FXML private ComboBox MethodComboBox;
    @FXML private TextField DelimiterTextBox;
    @FXML private CheckBox TextCheckBox;
    @FXML private CheckBox HexCheckBox;
    @FXML private MenuItem fileOpen;


    HandleFiles handleFiles = new HandleFiles();

    @Override
    public void initialize(URL location, ResourceBundle resources) {

        //Encode Decode Methods
        MethodComboBox.getItems().addAll(
                "Base 64",
                "Hex",
                "HTTP",
                "HTTP (Full)",
                "Unicode",
                "HTML (Simple)",
                "MD5",
                "SHA1"
        );
        MethodComboBox.setPromptText("Base 64");

        //comboBox.setEditable(true);
        MethodComboBox.setOnAction(event -> System.out.println("User Selects: " + MethodComboBox.getValue()));


//        //Control text typed on PlainTextBox
//        PlainTextBox.setOnKeyPressed(event -> {
//
//        });



        LoadPlainTextButton.setOnAction(event -> {
            File file = handleFiles.OpenFileDialog("TXT files (*.txt)","*.txt","Open Text File");
            if (file != null) {
                System.out.println(file.getName());

                try {
                    Scanner s = new Scanner(file).useDelimiter("\\s+");
                    while (s.hasNext()) {
                        if (s.hasNextInt()) { // check if next token is an int
                            PlainTextBox.appendText(s.nextInt() + " "); // display the found integer
                        } else {
                            PlainTextBox.appendText(s.next() + " "); // else read the next token
                        }
                    }
                } catch (FileNotFoundException ex) {
                    System.err.println(ex);
                }

//                BufferedReader buff = null;
//                try {
//                    buff = new BufferedReader(new FileReader(file));
//                    String str;
//                    while ((str = buff.readLine()) != null) {
//                        PlainTextBox.setText("\n"+str);
//                    }
//                } catch (IOException e) {
//                }
//            }

        }});


        EncodeButton.setOnAction(event -> {

            EncodeTextBox.setText(PlainTextBox.getText());
            System.out.println(MethodComboBox.getValue());

        });
    }

}
